<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<title>–¢—Ä–µ–Ω–∞–∂—ë—Ä (—Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞)</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<style>
  :root {
    --gap: 10px;
    --bg-color: #1e1e1e;
    --panel-color: #262626;
    --text-color: #eaeaea;
    --muted: #bdbdbd;
    --button-bg: #323232;
    --button-hover: #3c3c3c;
    --button-text: #ffffff;
    --accent: #6ba4ff;
    --border-color: #444;
  }

  /* —Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ */
  .light {
    --bg-color: #ffffff;
    --panel-color: #f4f4f4;
    --text-color: #1e1e1e;
    --muted: #555;
    --button-bg: #e0e0e0;
    --button-hover: #d5d5d5;
    --button-text: #000;
    --accent: #0066cc;
    --border-color: #ccc;
  }

  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    margin: 20px;
    background-color: var(--bg-color);
    color: var(--text-color);
  }
  h2 { margin: 0 0 10px 0; }
  .row { display: flex; gap: var(--gap); flex-wrap: wrap; align-items: center; }
  #question { white-space: pre-line; font-weight: 600; margin: 10px 0; }
  #answerInput { width: 100%; min-height: 110px; padding: 10px; font-size: 16px; background: var(--panel-color); color: var(--text-color); border: 1px solid var(--border-color); border-radius: 8px; }
  button { padding: 8px 12px; border: none; border-radius: 10px; cursor: pointer; background: var(--button-bg); color: var(--button-text); transition: background 0.15s ease; }
  button:hover:not(:disabled) { background: var(--button-hover); }
  button:disabled { opacity: .45; cursor: not-allowed; }
  #correctBox { white-space: pre-line; padding: 10px; background: var(--panel-color); border-radius: 8px; border: 1px solid var(--border-color); color: var(--accent); }
  #result { font-weight: 700; }
  .pill { padding: 4px 8px; border-radius: 999px; background: var(--panel-color); color: var(--muted); border: 1px solid var(--border-color); }
  .spacer { height: 8px; }
  .panel { border: 1px solid var(--border-color); border-radius: 12px; padding: 12px; background: var(--panel-color); box-shadow: 0 1px 6px rgba(0,0,0,.6); }
  label { color: var(--muted); }
  input[type="number"] { background: var(--panel-color); color: var(--text-color); border:1px solid var(--border-color); border-radius:6px; padding:6px; width:80px; }
  input[type="checkbox"] { transform:scale(1.05); }

  #checkBtn { display: none !important; }
  #selfTestBox { display: none !important; visibility: hidden !important; height: 0 !important; margin: 0 !important; padding: 0 !important; }

  /* –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è */
  #themeToggle {
    margin-left: auto;
  }
</style>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1e1e1e">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
</head>
<body>
<div class="row">
  <h2>–¢–µ—Å—Ç-—Ç—Ä–µ–Ω–∞–∂—ë—Ä (–≤–æ–ø—Ä–æ—Å—ã: 600)</h2>
  <button id="themeToggle">üåô/‚òÄÔ∏è</button>
</div>

<div id="selfTestBox" style="display:none; white-space:pre-line; padding:10px; margin:10px 0; background:transparent; border:1px solid var(--border-color); border-radius:8px; color:var(--muted);"></div>
<div class="panel row">
  <div class="row">
    <label>–°: <input id="rangeStart" min="1" type="number" value="1"/></label>
    <label>–ü–æ: <input id="rangeEnd" min="1" type="number" value="600"/></label>
    <label><input id="shuffle" type="checkbox"/> –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</label>
    <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
    <button disabled id="wrongOnlyBtn">–û—à–∏–±–æ—á–Ω—ã–µ ‚Üí –Ω–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω</button>
  </div>
  <div class="row">
    <span class="pill">–®–∞–≥: <span id="stepInfo">‚Äî/‚Äî</span></span>
    <span class="pill">–û—à–∏–±–æ–∫: <span id="wrongCount">0</span></span>
  </div>
</div>
<div class="spacer"></div>
<div class="panel">
  <div id="question">–ù–∞–∂–º–∏—Ç–µ ¬´–ù–∞—á–∞—Ç—å¬ª</div>
  <textarea id="answerInput" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
  <div class="row">
    <button disabled id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å (–ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–∞–ª–æ–Ω)</button>
    <button disabled id="markRightBtn">–ó–∞—Å—á–∏—Ç–∞—Ç—å –≤–µ—Ä–Ω–æ</button>
    <button disabled id="markWrongBtn">–ó–∞—Å—á–∏—Ç–∞—Ç—å –Ω–µ–≤–µ—Ä–Ω–æ</button>
    <button disabled id="showAnswerBtn">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
  </div>
  <div class="spacer"></div>
  <div id="correctBox" style="display:none;"></div>
  <div class="spacer"></div>
  <div class="row">
    <button disabled id="prevBtn">–ù–∞–∑–∞–¥</button>
    <button disabled id="nextBtn">–í–ø–µ—Ä—ë–¥</button>
  </div>
</div>

<script>
  // –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
  const body = document.body;
  const themeToggle = document.getElementById('themeToggle');

  if (localStorage.getItem('theme') === 'light') {
    body.classList.add('light');
  }

  themeToggle.addEventListener('click', () => {
    body.classList.toggle('light');
    if (body.classList.contains('light')) {
      localStorage.setItem('theme', 'light');
    } else {
      localStorage.setItem('theme', 'dark');
    }
  });
</script>
</body>
</html>